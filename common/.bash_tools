#!/usr/bin/env bash

# =====================================================================
# OS specific
# =====================================================================

case "$(current_os)" in
linux)
	# Enable bash completion in interactive shells
	if ! shopt -oq posix; then
		if [ -f /usr/share/bash-completion/bash_completion ]; then
			. /usr/share/bash-completion/bash_completion
		elif [ -f /etc/bash_completion ]; then
			. /etc/bash_completion
		fi
	fi

	# Set up homebrew
	eval "$(/home/linuxbrew/.linuxbrew/bin/brew shellenv)"
	;;
esac

# =====================================================================
# Common
# =====================================================================

# Set up lesspipe to read non-text files with less (e.g. pdf, tar.xz,
# etc.)
eval "$(lesspipe.sh)"

# Set up zoxide key bindings and completion
eval "$(zoxide init bash)"

# Set up fzf key bindings and fuzzy completion
eval "$(fzf --bash)"

# Set up starship prompt
eval "$(starship init bash)"

# Set up forgit
# shellcheck disable=SC1091
[ -f "$HOMEBREW_PREFIX/share/forgit/forgit.plugin.sh" ] &&
	. "$HOMEBREW_PREFIX/share/forgit/forgit.plugin.sh"
